# 교착상태(Deadlock)
- 멀티태스킹 환경에서 다수의 프로세스가 특정자원의 할당을 무한정 기다리고 있는 상태, 교착상태에 있는 프로세스들은 결코 실행을 끝낼 수 없으며 시스템 자원이 묶여있어서 다른 작업을 시작하는 것도 불가능

## 교착상태 vs 무한대기
#### 교착상태 
- 정의 
	- 다수의 프로세스가 아무 일도 못하고 특정사건 무한대기
- 발생원인
	- 상호배제, 점유와 대기, 비선점, 환형대기
- 해결방안
	- 예방, 회피, 발견, 회복
#### 무한대기
- 정의
	- 특정 프로세스가 자원을 할당 받기 위한 무한정 대기 상태
- 발생원인
	- 자원의 편중된 분배정책
- 해결방안 
	- Aging 기법

## 교착상태의 발생원인
- 교착상태는 한 시스템에서 다음 네 가지 조건이 동시 성립 시 발생
#### 상호배제(Mutual Exclusion)
- 프로세스들이 자원을 배타적으로 점유하여 다른 프로세스가 그 자원을 사용하지 못함
#### 점유와 대기(Block & Wait)
- 프로세스가 어떤 자원을 할당 받아 점유하고 있으면서 다른 자원을 요구
#### 비선점(Non Preemption)
- 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없으며, 점유하고 있는 프로세스 자신만이 해제 가능
#### 환형 대기(Circular wait)
- 프로세스간 자원 요구가 하나의 원형을 구성

## 교착상태의 해결방안
### 교착상태의 예방
- 상호배제 예방: 상호배제 사용하지 않음(동시 액세스 허락)
- 부분할당 예방: 프로세스가 필요로 하는 자원을 일시에 요구/할당
- 비선점 예방: 자원임시 할당해제 및 원상복구(다루기가 힘듦)
- 환형대기 예방: 모든 자원 고유번호 지정하여 환형대기 예방
### 회피(Avoidance) - Banker’s Algorithm(은행가 알고리즘)
- 데드락에 빠질 가능성이 있는지 없는지 운영체제가 검사하고 빠질 가능성이 없을 경우에만 자원을 할당함으로써 문제 발생을 피하는 방법
- 은행원 알고리즘에서 운영체제는 안전상태를 유지할 수 있는 요구만을 수락하는 불안전 상태를 초래할 사용자의 요구는 나중에 만족될 수 있을 때까지 계속 거절한다.
- 최소한 고객 한명에게 대출해줄 금액은 항상 은행이 보유하고 있어야 한다.
##### 은행원 알고리즘의 단점
- 할당할 수 있는 자원의 수, 사용자의 수가 일정해야 된다.
- 항상 불안전 상태를 방지해야 하므로 자원 이용도가 낮습니다.
- 최대 자원 요구량을 미리 알아야한다.
- 프로세스들은 유한한 시간 안에 자원을 반납해야 합니다.
### 교착상태의 발견(Detection)
- 시스템의 상태를 감시하는 알고리즘을 통하여 교착상태를 검사하는 방법
- 교착상태 발생 시 자원할당 소거
### 교착상태의 회복(Recovery)
- Deadlock이 없어질 때까지 프로세스를 순차적으로 kill하여 제거
- 프로세스 종료비용 최소화: 우선순위, 진행비용, 복귀비용 등
- 자원의 우선순위 할당: 희생자 선택, 복귀, 기아상태


## 상호배제(mutual exclusion)
- 병행 프로세스에서 프로세스 하나가 공유 자원 사용 시 다른 프로세스들이 동일한 일을 할 수 없도록 하는 방법
- 동기화 : 공유 자원을 동시에 사용하지 못하게 실행을 제어하는 방법 뜻 함. 
  - 동기화로 상호배제 보장할 수 있지만, 이 과정에서 교착 상태와 기아 상태가 발생할 수 있음
- 상호배제의 조건
  - 두 프로세스는 동시에 공유 자원에 진입 불가
  - 프로세스의 속도나 프로세서 수에 영향 받지 않음
  - 공유 자원을 사용하는 프로세스만 다른 프로세스 차단 가능
  - 프로세스가 공유 자원을 사용하려고 너무 오래 기다려서는 안 됨
#### 임계영역
- 다수의 프로세스가 접근 가능하지만, 어느 한 순간에는 프로세스 하나만 사용 가능
##### 임계 영역 이용한 상호배제
- 간편하게 상호배제 구현 가능(자물쇠와 열쇠 관계)
  - 프로세스가 진입하지 못하는 임계영역 -> 자물쇠로 잠근 상태
- 어떤 프로세스가 열쇠 사용할 수 있는지 확인하려고 검사 하는 동작과 다른 프로세스 사용 긂지하는 동작으로 분류

## 세마포어
